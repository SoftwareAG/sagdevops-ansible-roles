register external service db \
host="{{ configs_extdb.hostname }}" \
{%- if configs_extdb.jdbc_url is defined and configs_extdb.jdbc_url != ""  -%}
url="{{ configs_extdb.jdbc_url }}" \
{%- else -%}
url="jdbc:postgresql://{{ configs_extdb.hostname }}:{{ configs_extdb.port }}/{{ configs_extdb.dbname }}" \
{%- endif -%}
driverClassName="{{ configs_extdb.driverClassName | default('org.postgresql.Driver') }}" \
username="{{ configs_extdb.username }}" \
password="{{ configs_extdb.password }}" \
maxIdle={{ configs_extdb.maxIdle | default('15') }} \
maxActive={{ configs_extdb.maxActive | default('300') }} \
maxWait={{ configs_extdb.maxWait | default('10000') }} \
removeAbandoned={{ configs_extdb.removeAbandoned | default('false') }} \
removeAbandonedTimeout={{ configs_extdb.removeAbandonedTimeout | default('600') }} \
logAbandoned={{ configs_extdb.logAbandoned | default('true') }} \
initialSize={{ configs_extdb.initialSize | default('0') }} \
testOnBorrow={{ configs_extdb.testOnBorrow | default('true') }} \
validationQuery={{ configs_extdb.validationQuery | default('select 1 from dual') }} \
defaultAutoCommit={{ configs_extdb.defaultAutoCommit | default('false') }} \
rollbackOnReturn={{ configs_extdb.rollbackOnReturn | default('true') }} \
jmxEnabled={{ configs_extdb.jmxEnabled | default('true') }}