---

# - name: Include tasks
#   include_tasks: "do_get-groups.yml"

- name: set response test
  set_fact:
    response:
      json: []
      
- name: Set filter values for response parsing
  set_fact:
    rest_response_filter_groupnames: "{{ apiportal_configparams_rest_groupsmgt_get_groups_groupnames | default([],true) }}"

- name: Parse response and extract ids based on rest_response_filter_groupnames filter var
  set_fact:
    group_ids: "{{ lookup('template', 'apiportal_rest_groupsmgt_responseparsing_allgroups_ids_byname.json.j2') }}"

- name: Print response
  debug:
    var: group_ids
    verbosity: 3

- name: set response test
  set_fact:
    response:
      json:
      - ".AUserRole":
        attrs: {}
        created: 1606963069187
        description: Group that manages access token requests
        displayName: API Consumption Approvers
        groupPermissions: []
        id: 68dfc956-39db-3416-9b9d-ef5cdddc0cdc
        name: API Consumption Approvers
        technicalName: API Consumption Approvers
        tenantId: default
        updated: 1606963069188
      
- name: Set filter values for response parsing
  set_fact:
    rest_response_filter_groupnames: "{{ apiportal_configparams_rest_groupsmgt_get_groups_groupnames | default([],true) }}"

- name: Parse response and extract ids based on rest_response_filter_groupnames filter var
  set_fact:
    group_ids: "{{ lookup('template', 'apiportal_rest_groupsmgt_responseparsing_allgroups_ids_byname.json.j2') }}"

- name: Print response
  debug:
    var: group_ids
    verbosity: 3
