---

  - debug: var=apiportal_configparams_rest_groupsmgt_groups_in_group verbosity=3

  - name: update groups if variable defined
    block:

      - name: fail if mandatory param not specified
        fail: 
          msg: "A mandatory param was not defined, cannot do anything."
        when: item is not defined or item == ""
        with_items:
          - "{{ apiportal_configparams_rest_groupsmgt_groups_in_group.group_uuid_parent }}"
          - "{{ apiportal_configparams_rest_groupsmgt_groups_in_group.group_uuid_children }}"

      - name: Create groups in group association
        uri:
          url: "{{ apiportal_configparams_rest_groupsmgt_path }}/{{ apiportal_configparams_rest_groupsmgt_groups_in_group.group_uuid_parent }}/children?tenant={{ apiportal_configparams_rest_tenant }}"
          method: POST
          user: "{{ apiportal_configparams_rest_auth_username }}"
          password: "{{ apiportal_configparams_rest_auth_password }}"
          return_content: yes
          body: "{{ apiportal_configparams_rest_groupsmgt_groups_in_group.group_uuid_children | default([]) | to_json }}"
          force_basic_auth: yes
          validate_certs: false
          status_code: "200"
          body_format: json
          timeout: 30
        register: rest_response
        
      - name: Print response
        debug:
          var: rest_response.json
          verbosity: 3

    when: apiportal_configparams_rest_groupsmgt_groups_in_group is defined