---

  - name: set initial facts
    set_fact:
      runnable_suffix: "{{ webmethods_apiportal_acc_install_size_code }}"

  - name: fail if runnable_suffix not specified
    fail: 
      msg: "runnable_suffix not specified...cannot do anything."
    when: runnable_suffix is not defined or runnable_suffix == ""

## 1 - stopall, deconfigure postgres, start zookeeper only

  - import_role: 
      name: command-apiportal
    vars:
      webmethods_apiportal_acc_command: "stopall"
  
  - import_role: 
      name: command-apiportal
    vars:
      webmethods_apiportal_acc_command: "deconfigure postgres_{{ runnable_suffix }}"
  
  - import_role: 
      name: command-apiportal
    vars:
      webmethods_apiportal_acc_command: "start zoo_{{ runnable_suffix }}"