---

  - name: installing needed package to convert the JKS into the expected format 
    import_role: 
      name: manage-packages
    vars:
      extra_packages: []
      mandatory_packages:
        - openssl

  - name: convert from the JKS keystore to the CRT/KEY files that centrasite registry expects for SSL
    import_role: 
      name: java-certs
    vars:
      command: convert-jks-to-httpd-certs
      java_home: "{{ configure_centrasite_params_java_home }}"
      jks_input_file_path: "{{ configure_centrasite_params_create_registry_certs_keystore_path }}"
      jks_input_file_password: "{{ configure_centrasite_params_create_registry_certs_keystore_password }}"
      jks_input_file_alias: "{{ configure_centrasite_params_create_registry_certs_keystore_keyalias }}"
      httpd_certs_output_dir: "{{ configure_centrasite_params_create_registry_certs_output_dir }}"
      httpd_certs_output_crt_file: "{{ configure_centrasite_params_create_registry_certs_crt_file }}"
      httpd_certs_output_key_file: "{{ configure_centrasite_params_create_registry_certs_key_file }}"
      cleanup_intermediary_files: true