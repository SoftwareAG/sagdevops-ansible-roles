---

  - name: gettting the files to add to integration server
    include_role:
      name: aws-wrapper
    vars:
      command: "getfroms3"
      getfroms3_bucket_name: "{{ outer_item.remote_s3_bucket_name | default('', true) }}"
      getfroms3_bucket_path: "{{ outer_item.remote_s3_bucket_path | default('', true) }}"
      getfroms3_local_path: "{{ outer_item.local_path | default('',true) }}"
      getfroms3_local_path_owner_user: "{{ outer_item.local_path_owner_user | default('',true) }}"
      getfroms3_local_path_owner_group: "{{ outer_item.local_path_owner_group | default('',true) }}"
      getfroms3_local_path_permission: "{{ outer_item.local_path_permission | default('',true) }}"
    with_items: "{{ webmethods_download_files_s3 }}"
    loop_control:
      loop_var: outer_item
    when: webmethods_download_files_s3 is defined and (webmethods_download_files_s3|length > 0)