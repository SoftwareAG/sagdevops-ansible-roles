---

  - debug: var=rvar_apigateway_archive_import_single verbosity=3

  - name: Upload new archive to apigateway
    include_role:
      name: curl-wrapper
    vars:
      command: upload-multipart-formdata
      curl_wrapper_target_uri: "{{ apigateway_rest_archives }}?overwrite={{ rvar_apigateway_archive_import_single.overwrite | default('false',true) }}&preserveAssetState={{ rvar_apigateway_archive_import_single.preserveAssetState | default('true',true) }}"
      curl_wrapper_basicauth_user: "{{ apigateway_rest_login_username }}"
      curl_wrapper_basicauth_password: "{{ apigateway_rest_login_password }}"
      curl_wrapper_multipart_formdata_fields:
        zipFile: "@{{ rvar_apigateway_archive_import_single.path }}"
      curl_wrapper_headers_fields:
        "Accept": "application/json"
        "x-HTTP-Method-Override": "POST"